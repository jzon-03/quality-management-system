<div class="ipi-container">
  <!-- Header with Statistics -->
  <app-ipi-header 
    [showForm]="showForm"
    [statistics]="statistics"
    (toggleForm)="toggleForm()">
  </app-ipi-header>

  <!-- IPI Form -->
  <app-ipi-form 
    *ngIf="showForm"
    [ipiForm]="ipiForm"
    [isEditMode]="isEditMode"
    [activeTabIndex]="activeTabIndex"
    [workCenters]="workCenters"
    [shifts]="shifts"
    [priorities]="priorities"
    [statuses]="statuses"
    [dispositions]="dispositions"
    [defectTypes]="defectTypes"
    [severities]="severities"
    [measurementUnits]="measurementUnits"
    [results]="results"
    [processResults]="processResults"
    (submitForm)="onSubmit()"
    (resetForm)="resetForm()"
    (addDefect)="addDefect()"
    (removeDefect)="removeDefect($event)"
    (addMeasurement)="addMeasurement()"
    (removeMeasurement)="removeMeasurement($event)"
    (addVisualCheck)="addVisualCheck()"
    (removeVisualCheck)="removeVisualCheck($event)"
    (addProcessParameter)="addProcessParameter()"
    (removeProcessParameter)="removeProcessParameter($event)">
  </app-ipi-form>

  <!-- IPI Records Table -->
  <app-ipi-table
    [records]="filteredRecords"
    [statuses]="statuses"
    [workCenters]="workCenters"
    [displayedColumns]="displayedColumns"
    (filterChange)="updateFilteredRecords($event)"
    (editRecord)="editRecord($event)"
    (approveRecord)="approveRecord($event)"
    (rejectRecord)="rejectRecord($event)"
    (holdRecord)="holdRecord($event)"
    (viewDetails)="viewDetails($event)"
    (deleteRecord)="deleteRecord($event)">
  </app-ipi-table>
</div>
